!function($){var e={init:function(e){var i={maxSize:-1,minSize:-1,spacing:5,duration:500,isVertical:!1,easing:void 0,autoResize:!0,behavior:null,delayMouseIn:0,delayMouseOut:0,selectOnClick:!0,deselectOnClick:!1,interval:2500,interactive:!0},n=$.extend(i,e);if(-1!==n.minSize&&-1!==n.maxSize)throw new Error("Kwicks options minSize and maxSize may not both be set");if(n.behavior&&"menu"!==n.behavior&&"slideshow"!==n.behavior)throw new Error("Unrecognized Kwicks behavior specified: "+n.behavior);return $.each(["minSize","maxSize","spacing"],function(e,t){var i=n[t];switch(typeof i){case"number":n[t+"Units"]="px";break;case"string":if("%"===i.slice(-1))n[t+"Units"]="%",n[t]=+i.slice(0,-1)/100;else{if("px"!==i.slice(-2))throw new Error("Invalid value for Kwicks option "+t+": "+i);n[t+"Units"]="px",n[t]=+i.slice(0,-2)}break;default:throw new Error("Invalid value for Kwicks option "+t+": "+i)}}),this.each(function(){$(this).data("kwicks",new t(this,n))})},expand:function(e,t){"object"==typeof e&&(t=e,e=void 0);var i=t&&t.delay||0;return this.each(function(){var t=$(this),n=t.data("kwicks");if(n)e="number"==typeof e?e:-1;else{if(!(n=t.parent().data("kwicks")))return;e=t.index()}var s=function(){if(e!==n.expandedIndex){var t=n.$panels,i=t[e]||null;n.$container.trigger("expand.kwicks",{index:e,expanded:i,collapsed:t.not(i).get(),oldIndex:n.expandedIndex,oldExpanded:n.getExpandedPanel(),isAnimated:n.isAnimated})}},a=n.$container.data("kwicks-timeout-id");a&&(n.$container.removeData("kwicks-timeout-id"),clearTimeout(a)),i>0?n.$container.data("kwicks-timeout-id",setTimeout(s,i)):s()})},expanded:function(){var e=this.first().data("kwicks");if(e)return e.expandedIndex},select:function(e){return this.each(function(){var t=$(this),i=t.data("kwicks");if(i)e="number"==typeof e?e:-1;else{if(!(i=t.parent().data("kwicks")))return;e=t.index()}if(e!==i.selectedIndex){var n=i.$panels,s=n[e]||null;i.$container.trigger("select.kwicks",{index:e,selected:s,unselected:n.not(s).get(),oldIndex:i.selectedIndex,oldSelected:i.getSelectedPanel()})}i.$container.kwicks("expand",e)})},selected:function(){var e=this.first().data("kwicks");if(e)return e.selectedIndex},resize:function(){return this.each(function(){var e=$(this),t=e.data("kwicks");t&&t.resize()})},destroy:function(){return this.each(function(){var e=$(this),t=e.data("kwicks");t&&t.destroy()})}};$.fn.kwicks=function(t){if(e[t])return e[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof t&&t)throw new Error("Unrecognized kwicks method: "+t);return e.init.apply(this,arguments)},$.event.special.expand={_default:function(e,t){if("kwicks"===e.namespace){var i=$(e.target).data("kwicks");i&&i.expand(t.index)}}},$.event.special.select={_default:function(e,t){if("kwicks"===e.namespace){var i=$(e.target).data("kwicks");i&&i.select(t.index)}}};var t=function e(t,i){var n=this;this.opts=i,this.onDestroyHandlers=[];var s=i.isVertical?"vertical":"horizontal";this.$container=$(t),this.$panels=this.$container.children();var a=["kwicks","kwicks-"+s];$.each(a,function(e){n.$container.hasClass(e)||(n.$container.addClass(e),n.onDestroy(function(){n.$container.removeClass(e)}))}),this.selectedIndex=this.$panels.filter(".kwicks-selected").index(),this.expandedIndex=this.selectedIndex,this.primaryDimension=i.isVertical?"height":"width",this.secondaryDimension=i.isVertical?"width":"height",this.calculatePanelSizes(),this.primaryAlignment=i.isVertical?"top":"left",this.secondaryAlignment=i.isVertical?"bottom":"right",this.$timer=$({progress:0}),this.isAnimated=!1,this.offsets=this.getOffsetsForExpanded(),this.updatePanelStyles(),this.initBehavior(),this.initWindowResizeHandler(),setTimeout(function(){n.updatePanelStyles()},100)};t.prototype.calculatePanelSizes=function(){var e=this.opts,t=this.getContainerSize(!0);"%"===e.spacingUnits?this.panelSpacing=t*e.spacing:this.panelSpacing=e.spacing;var i=this.$panels.length,n=this.panelSpacing*(i-1),s=t-n;this.panelSize=s/i,-1===e.minSize?(-1===e.maxSize?this.panelMaxSize=i<5?t/3*2:t/3:"%"===e.maxSizeUnits?this.panelMaxSize=s*e.maxSize:this.panelMaxSize=e.maxSize,this.panelMinSize=(s-this.panelMaxSize)/(i-1)):-1===e.maxSize&&("%"===e.minSizeUnits?this.panelMinSize=s*e.minSize:this.panelMinSize=e.minSize,this.panelMaxSize=s-this.panelMinSize*(i-1))},t.prototype.getOffsetsForExpanded=function(){for(var e=this.expandedIndex,t=this.$panels.length,i=this.panelSpacing,n=this.panelSize,s=this.panelMinSize,a=this.panelMaxSize,o=[0],r=1;r<t;r++)o[r]=-1===e?r*(n+i):r<=e?r*(s+i):a+s*(r-1)+r*i;return o},t.prototype.setStyle=function(){return $.support.style?function(e,t){e.setAttribute("style",t)}:function(e,t){e.style.cssText=t}}(),t.prototype.updatePanelStyles=function(){for(var e=this.offsets,t=this.$panels,i=this.primaryDimension,n=this.primaryAlignment,s=this.secondaryAlignment,a=this.panelSpacing,o=this.getContainerSize(),r=this._stylesInited?"":"position:absolute;",d,l,c,h,p=t.length;p--;)c=d,d=Math.round(e[p]),p===t.length-1?(l=o-d,h=s+":0;"+i+":"+l+"px;"):(l=c-d-a,h=n+":"+d+"px;"+i+":"+l+"px;"),this.setStyle(t[p],r+h);this._stylesInited||(this.$container.addClass("kwicks-processed"),this._stylesInited=!0)},t.prototype.initBehavior=function(){if(this.opts.behavior)switch(this.opts.behavior){case"menu":this.initMenuBehavior();break;case"slideshow":this.initSlideshowBehavior();break;default:throw new Error("Unrecognized behavior option: "+this.opts.behavior)}},t.prototype.initMenuBehavior=function(){var e=this,t=e.opts;this.addEventHandler(this.$container,"mouseleave",function(){e.$container.kwicks("expand",-1,{delay:t.delayMouseOut})}),this.addEventHandler(this.$panels,"mouseenter",function(){$(this).kwicks("expand",{delay:t.delayMouseIn})}),(t.selectOnClick||t.deselectOnClick)&&this.addEventHandler(this.$panels,"click",function(){var e=$(this),i=e.hasClass("kwicks-selected");i&&t.deselectOnClick?e.parent().kwicks("select",-1):!i&&t.selectOnClick&&e.kwicks("select")})},t.prototype.initSlideshowBehavior=function(){var e=this,t=this.$panels.length,i=0,n=!1,s,a=function(){n||(s=setInterval(function(){e.$container.kwicks("expand",++i%t)},e.opts.interval),n=!0)},o=function(){clearInterval(s),n=!1};a(),this.onDestroy(o),this.opts.interactive&&(this.addEventHandler(this.$container,"mouseenter",o),this.addEventHandler(this.$container,"mouseleave",a),this.addEventHandler(this.$panels,"mouseenter",function(){i=$(this).kwicks("expand").index()}))},t.prototype.initWindowResizeHandler=function(){if(this.opts.autoResize){var e=this,t=0,i=!1,n=$(window),s=function(n){n||(i=!1);var a=+new Date;if(a-t<20){if(i)return;return setTimeout(s,20-(a-t)),void(i=!0)}t=a,e.resize()};this.addEventHandler(n,"resize",s)}},t.prototype.getContainerSize=function(e){var t=this._containerSize;return!e&&t||(t=this._containerSize=this.$container[this.primaryDimension]()),t},t.prototype.getExpandedPanel=function(){return this.$panels[this.expandedIndex]||null},t.prototype.getCollapsedPanels=function(){return-1===this.expandedIndex?[]:this.$panels.not(this.getExpandedPanel()).get()},t.prototype.getSelectedPanel=function(){return this.$panels[this.selectedIndex]||null},t.prototype.getUnselectedPanels=function(){return this.$panels.not(this.getSelectedPanel()).get()},t.prototype.onDestroy=function(e){this.onDestroyHandlers.push(e)},t.prototype.addEventHandler=function(e,t,i){e.on(t,i),this.onDestroy(function(){e.off(t,i)})},t.prototype.destroy=function(){this.$timer.stop();for(var e=0,t=this.onDestroyHandlers.length;e<t;e++)this.onDestroyHandlers[e]();this.$panels.attr("style","").removeClass("kwicks-expanded kwicks-selected kwicks-collapsed"),this.$container.removeClass("kwicks-processed").removeData("kwicks")},t.prototype.resize=function(){this.getContainerSize()!==this.getContainerSize(!0)&&(this.calculatePanelSizes(),this.offsets=this.getOffsetsForExpanded(),this.isAnimated?this._dirtyOffsets=!0:this.updatePanelStyles())},t.prototype.select=function(e){e!==this.selectedIndex&&($(this.getSelectedPanel()).removeClass("kwicks-selected"),this.selectedIndex=e,$(this.getSelectedPanel()).addClass("kwicks-selected"))},t.prototype.expand=function(e){var t=this,i=this.expandedIndex,n=this.getExpandedPanel();if(-1===e&&(e=this.selectedIndex),e!==this.expandedIndex){$(this.getExpandedPanel()).removeClass("kwicks-expanded"),$(this.getCollapsedPanels()).removeClass("kwicks-collapsed"),this.expandedIndex=e,$(this.getExpandedPanel()).addClass("kwicks-expanded"),$(this.getCollapsedPanels()).addClass("kwicks-collapsed");var s=this.$timer,a=this.$panels.length,o=this.offsets.slice(),r=this.offsets,d=this.getOffsetsForExpanded();s.stop()[0].progress=0,this.isAnimated=!0,s.animate({progress:1},{duration:this.opts.duration,easing:this.opts.easing,step:function(e){t._dirtyOffsets&&(r=t.offsets,d=t.getOffsetsForExpanded(),t._dirtyOffsets=!1),r.length=0;for(var i=0;i<a;i++){var n=d[i],s=n-(n-o[i])*(1-e);r[i]=s}t.updatePanelStyles()},complete:function(){t.isAnimated=!1,t.$container.trigger("expand-complete.kwicks",{index:e,expanded:t.getExpandedPanel(),collapsed:t.getCollapsedPanels(),oldIndex:i,oldExpanded:n,isAnimated:!1})}})}}}(jQuery);